{% macro card(value, suit, index, playable) -%}
{% if suit == '&clubs;' %}
    {% set suit_index = 0 %}
{% elif suit == '&spades;' %}
    {% set suit_index = 1 %}
{% elif suit == '&diams;' %}
    {% set suit_index = 2 %}
{% elif suit == '&hearts;' %}
    {% set suit_index = 3 %}
{% endif %}
{% if playable == 1 %}
 {% set playable_markup = "onmouseover=\"moveCardUp('"|safe ~ value ~ "_" ~ suit_index ~ "');\" onmouseout=\"moveCardDown('"|safe ~ value ~ "_" ~ suit_index ~ "')\""|safe %}
{% elif playable == 2 %}
 {% set playable_markup = "onmouseover=\"moveCardUp('"|safe ~ value ~ "_" ~ suit_index ~ "');\" onmouseout=\"moveCardDown('"|safe ~ value ~ "_" ~ suit_index ~ "')\""|safe %}
{% elif playable == 3 %}
 {% set playable_markup = "onmouseover=\"moveCardUp('"|safe ~ value ~ "_" ~ suit_index ~ "');\" onmouseout=\"moveCardDown('"|safe ~ value ~ "_" ~ suit_index ~ "')\""|safe %}
{% elif playable == 4 %}
 {% set playable_markup = "onmouseover=\"moveCardUp('"|safe ~ value ~ "_" ~ suit_index ~ "');\" onmouseout=\"moveCardDown('"|safe ~ value ~ "_" ~ suit_index ~ "')\""|safe %}
{% else %}
 {% set playable_markup = "" %}
{% endif %}
    <div class="card_hit_area" {{ playable_markup }} style="left:{{ index }}em;top:{{ ((index-6)/4)**2 }}em;transform:rotate({{ 7*(index-6) }}deg);">
{% if playable %}
    <div class="card" id="{{ value }}_{{ suit_index }}">
{% else %}
    <div class="card_small" id="{{ value }}_{{ suit_index }}">
{% endif %}
{% if suit == '&clubs;' or suit == '&spades;'  %}
    <div class="front">
{% else %}
    <div class="front red">
{% endif %}
{% if value == 11 %}
    <div class="index">A<br />{{ suit|safe }}</div>
    <div class="index_bottom">A<br />{{ suit|safe }}</div>
{% elif value < 8 %}
    <div class="index">{{ value+3 }}<br />{{ suit|safe }}</div>
    <div class="index_bottom">{{ value+3 }}<br />{{ suit|safe }}</div>
{% elif value == 12 %}
    <div class="index">{{ 2 }}<br />{{ suit|safe }}</div>
    <div class="index_bottom">{{ 2 }}<br />{{ suit|safe }}</div>
{% endif %}
{% if value == 11 %}
    <div class="ace">{{ suit|safe }}</div>
{% elif value == 12 %}
    <div class="spotB1">{{ suit|safe }}</div>
    <div class="spotB5">{{ suit|safe }}</div>
{% elif value == 0 %}
    <div class="spotB1">{{ suit|safe }}</div>
    <div class="spotB3">{{ suit|safe }}</div>
    <div class="spotB5">{{ suit|safe }}</div>
{% elif value < 8 %}
    <div class="spotA1">{{ suit|safe }}</div>
    <div class="spotA5">{{ suit|safe }}</div>
    <div class="spotC1">{{ suit|safe }}</div>
    <div class="spotC5">{{ suit|safe }}</div>
{% endif %}
{% if value == 2 %}
    <div class="spotB3">{{ suit|safe }}</div>
{% elif value == 3 %}
    <div class="spotA3">{{ suit|safe }}</div>
    <div class="spotC3">{{ suit|safe }}</div>
{% elif value == 4 %}
    <div class="spotA3">{{ suit|safe }}</div>
    <div class="spotC3">{{ suit|safe }}</div>
    <div class="spotB2">{{ suit|safe }}</div>
{% elif value == 5 %}
    <div class="spotA3">{{ suit|safe }}</div>
    <div class="spotC3">{{ suit|safe }}</div>
    <div class="spotB2">{{ suit|safe }}</div>
    <div class="spotB4">{{ suit|safe }}</div>
{% elif value == 6 %}
    <div class="spotA2">{{ suit|safe }}</div>
    <div class="spotC2">{{ suit|safe }}</div>
    <div class="spotA4">{{ suit|safe }}</div>
    <div class="spotC4">{{ suit|safe }}</div>
    <div class="spotB3">{{ suit|safe }}</div>
{% elif value == 7 %}
    <div class="spotA2">{{ suit|safe }}</div>
    <div class="spotC2">{{ suit|safe }}</div>
    <div class="spotA4">{{ suit|safe }}</div>
    <div class="spotC4">{{ suit|safe }}</div>
    <div class="spotB2">{{ suit|safe }}</div>
    <div class="spotB4">{{ suit|safe }}</div>
{% elif value == 8 %}
    {% if suit == '&clubs;' %}
        <img class="face" src="{{url_for('static', filename='img/jack_clubs.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&spades;' %}
        <img class="face" src="{{url_for('static', filename='img/jack_spades.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&diams;' %}
        <img class="face" src="{{url_for('static', filename='img/jack_diamonds.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&hearts;' %}
        <img class="face" src="{{url_for('static', filename='img/jack_hearts.jpg') }}" alt="" width="80" height="130"  />
    {% endif %}
{% elif value == 9 %}
    {% if suit == '&clubs;' %}
        <img class="face" src="{{url_for('static', filename='img/queen_clubs.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&spades;' %}
        <img class="face" src="{{url_for('static', filename='img/queen_spades.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&diams;' %}
        <img class="face" src="{{url_for('static', filename='img/queen_diamonds.jpg') }}" alt="" width="80" height="130"  />
    {% elif suit == '&hearts;' %}
        <img class="face" src="{{url_for('static', filename='img/queen_hearts.jpg') }}" alt="" width="80" height="130"  />
    {% endif %}
{% elif value == 10 %}
{% if suit == '&clubs;' %}
    <img class="face" src="{{url_for('static', filename='img/king_clubs.jpg') }}" alt="" width="80" height="130"  />
{% elif suit == '&spades;' %}
    <img class="face" src="{{url_for('static', filename='img/king_spades.jpg') }}" alt="" width="80" height="130"  />
{% elif suit == '&diams;' %}
    <img class="face" src="{{url_for('static', filename='img/king_diamonds.jpg') }}" alt="" width="80" height="130"  />
{% elif suit == '&hearts;' %}
    <img class="face" src="{{url_for('static', filename='img/king_hearts.jpg') }}" alt="" width="80" height="130"  />
{% endif %}
{% elif value == 13 %}
{% if suit == '&spades;' %}
    <img class="face" src="{{url_for('static', filename='img/black_joker.jpg') }}" alt="" width="80" height="130"  />
{% elif suit == '&hearts;' %}
    <img class="face" src="{{url_for('static', filename='img/red_joker.jpg') }}" alt="" width="80" height="130"  />
{% endif %}
{% endif %}
    </div>
    </div>
    </div>
{%- endmacro %}